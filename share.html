<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Share Anonymously - MindVault</title>
    <meta name="description" content="Share your thoughts and feelings safely and anonymously">
    <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/config.js"></script>
    <script src="js/error-handler.js"></script>
    <script src="js/supabase-client.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', system-ui, sans-serif; }
        .gradient-text { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* Dark Mode Styles */
        .dark { background-color: #0f172a; color: #f1f5f9; }
        .dark nav { background-color: rgba(15, 23, 42, 0.8); backdrop-filter: blur(16px); }
        .dark .bg-white { background-color: #1e293b; }
        .dark .bg-gray-50 { background-color: #334155; }
        .dark .bg-gray-100 { background-color: #475569; }
        .dark .text-gray-900 { color: #f1f5f9; }
        .dark .text-gray-700 { color: #cbd5e1; }
        .dark .text-gray-600 { color: #94a3b8; }
        .dark .border-gray-200 { border-color: #475569; }
        .dark .border-gray-300 { border-color: #64748b; }
        .dark .bg-gradient-to-br { background: linear-gradient(to bottom right, #1e293b, #334155); }
        .dark .from-blue-50 { --tw-gradient-from: #1e293b; }
        .dark .to-indigo-100 { --tw-gradient-to: #334155; }
        .dark .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2); }
        .dark .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2); }
        .dark #theme-toggle { background-color: #475569; }
        .dark #theme-toggle:hover { background-color: #64748b; }
        
        /* Form styling */
        * { transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease; }
        .dark input, .dark select, .dark textarea { background-color: #1e293b; color: #f1f5f9; border-color: #475569; }
        .dark input:focus, .dark select:focus, .dark textarea:focus { background-color: #1e293b; color: #f1f5f9; border-color: #4f46e5; }
        .dark input::placeholder, .dark textarea::placeholder { color: #94a3b8; }
        
        .mood-option { transition: all 0.3s ease; cursor: pointer; }
        .mood-option:hover { transform: translateY(-2px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); }
        .mood-option.selected { transform: scale(1.05); box-shadow: 0 0 20px rgba(79, 70, 229, 0.3); }
        
        .post-card { transition: all 0.3s ease; }
        .post-card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); }
        
        .category-tag { transition: all 0.3s ease; cursor: pointer; }
        .category-tag:hover { transform: scale(1.05); }
        .category-tag.selected { background-color: #4f46e5; color: white; }
        
        .privacy-indicator { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        
        .typing-indicator { animation: typing 1.5s infinite; }
        @keyframes typing { 0%, 60%, 100% { opacity: 0.4; } 30% { opacity: 1; } }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 transition-colors duration-300">
    <!-- Navigation -->
    <nav class="bg-white/80 backdrop-blur-md shadow-sm fixed w-full top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-2">
                    <img src="assets/mindvault-icon.svg" alt="MindVault" class="h-8 w-8">
                    <span class="text-2xl font-bold text-gray-900">MindVault</span>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="hidden md:flex items-center space-x-6">
                        <a href="dashboard-simple.html" class="text-gray-600 hover:text-indigo-600 transition-colors">Dashboard</a>
                        <a href="share.html" class="text-indigo-600 font-semibold">Share</a>
                        <a href="insights.html" class="text-gray-600 hover:text-indigo-600 transition-colors">Insights</a>
                        <a href="counselor-matching.html" class="text-gray-600 hover:text-indigo-600 transition-colors">Counselors</a>
                        <a href="peer-support.html" class="text-gray-600 hover:text-indigo-600 transition-colors">Support</a>
                        <a href="progress-tracking.html" class="text-gray-600 hover:text-indigo-600 transition-colors">Progress</a>
                    </div>
                    
                    <div class="flex items-center space-x-3">
                        <div class="privacy-indicator flex items-center text-sm text-green-600">
                            <svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                            </svg>
                            Anonymous
                        </div>
                        <button id="theme-toggle" class="p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors">
                            <svg id="sun-icon" class="h-5 w-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                            </svg>
                            <svg id="moon-icon" class="h-5 w-5 text-gray-600 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                            </svg>
                        </button>
                        <button onclick="logout()" class="text-gray-600 hover:text-indigo-600 transition-colors" title="Logout">
                            <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4 4m0 0l-4 4m4-4H3m6-4v1a3 3 0 003 3h4a3 3 0 003-3v-1"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="pt-20 pb-16 px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">
                    Share <span class="gradient-text">Anonymously</span>
                </h1>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                    Express your thoughts and feelings in a safe, anonymous space. Your identity is protected while you connect with others who understand.
                </p>
            </div>

            <!-- Sharing Form -->
            <div class="bg-white p-8 rounded-2xl shadow-xl mb-8">
                <form id="sharing-form" class="space-y-6">
                    <!-- Mood Selection -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-4">How are you feeling right now?</label>
                        <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                            <div class="mood-option bg-red-50 p-4 rounded-lg border-2 border-red-200 text-center" onclick="selectMood('sad')">
                                <svg class="h-8 w-8 text-red-500 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33M15 6.75a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                <span class="text-sm font-semibold text-red-600">Sad</span>
                            </div>
                            <div class="mood-option bg-orange-50 p-4 rounded-lg border-2 border-orange-200 text-center" onclick="selectMood('anxious')">
                                <svg class="h-8 w-8 text-orange-500 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                                </svg>
                                <span class="text-sm font-semibold text-orange-600">Anxious</span>
                            </div>
                            <div class="mood-option bg-yellow-50 p-4 rounded-lg border-2 border-yellow-200 text-center" onclick="selectMood('neutral')">
                                <svg class="h-8 w-8 text-yellow-500 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33M15 6.75a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                <span class="text-sm font-semibold text-yellow-600">Neutral</span>
                            </div>
                            <div class="mood-option bg-blue-50 p-4 rounded-lg border-2 border-blue-200 text-center" onclick="selectMood('calm')">
                                <svg class="h-8 w-8 text-blue-500 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33M15 6.75a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                <span class="text-sm font-semibold text-blue-600">Calm</span>
                            </div>
                            <div class="mood-option bg-green-50 p-4 rounded-lg border-2 border-green-200 text-center" onclick="selectMood('happy')">
                                <svg class="h-8 w-8 text-green-500 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33M15 6.75a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                <span class="text-sm font-semibold text-green-600">Happy</span>
                            </div>
                        </div>
                    </div>

                    <!-- Category Selection -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-4">What's this about?</label>
                        <div class="flex flex-wrap gap-3">
                            <span class="category-tag bg-gray-100 text-gray-700 px-4 py-2 rounded-full text-sm font-medium" onclick="selectCategory('work')">Work</span>
                            <span class="category-tag bg-gray-100 text-gray-700 px-4 py-2 rounded-full text-sm font-medium" onclick="selectCategory('relationships')">Relationships</span>
                            <span class="category-tag bg-gray-100 text-gray-700 px-4 py-2 rounded-full text-sm font-medium" onclick="selectCategory('health')">Health</span>
                            <span class="category-tag bg-gray-100 text-gray-700 px-4 py-2 rounded-full text-sm font-medium" onclick="selectCategory('family')">Family</span>
                            <span class="category-tag bg-gray-100 text-gray-700 px-4 py-2 rounded-full text-sm font-medium" onclick="selectCategory('school')">School</span>
                            <span class="category-tag bg-gray-100 text-gray-700 px-4 py-2 rounded-full text-sm font-medium" onclick="selectCategory('money')">Money</span>
                            <span class="category-tag bg-gray-100 text-gray-700 px-4 py-2 rounded-full text-sm font-medium" onclick="selectCategory('general')">General</span>
                        </div>
                    </div>

                    <!-- Main Content -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Share your thoughts</label>
                        <textarea id="post-content" name="content" rows="6" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none" placeholder="What's on your mind? Share your thoughts, feelings, or experiences. Remember, this is completely anonymous and safe."></textarea>
                        <div class="flex justify-between items-center mt-2">
                            <span class="text-sm text-gray-500">Your post will be completely anonymous</span>
                            <span class="text-sm text-gray-500"><span id="char-count">0</span>/1000 characters</span>
                        </div>
                    </div>

                    <!-- Privacy Settings -->
                    <div class="bg-green-50 p-4 rounded-lg">
                        <div class="flex items-start">
                            <svg class="h-5 w-5 text-green-600 mr-3 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                            </svg>
                            <div>
                                <h4 class="font-semibold text-green-800 mb-1">Your Privacy is Protected</h4>
                                <ul class="text-sm text-green-700 space-y-1">
                                    <li>• No personal information is collected or stored</li>
                                    <li>• Posts are completely anonymous</li>
                                    <li>• Your IP address is not logged</li>
                                    <li>• Posts are encrypted and secure</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="w-full bg-indigo-600 text-white py-4 rounded-lg text-lg font-semibold hover:bg-indigo-700 transition-colors">
                        Share Anonymously
                    </button>
                </form>
            </div>

            <!-- Community Posts -->
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">Community Support</h2>
                <div class="space-y-6" id="community-posts">
                    <!-- Sample Post 1 -->
                    <div class="post-card bg-white p-6 rounded-xl shadow-lg">
                        <div class="flex items-start space-x-4">
                            <div class="bg-indigo-100 p-3 rounded-full">
                                <svg class="h-6 w-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="text-sm font-semibold text-gray-900">Anonymous User</span>
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium">Work</span>
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium">Calm</span>
                                    <span class="text-sm text-gray-500">2 hours ago</span>
                                </div>
                                <p class="text-gray-700 mb-3">I've been struggling with work-life balance lately. It feels like I'm constantly juggling responsibilities and never have time for myself. Does anyone else feel this way? How do you manage to find time for self-care?</p>
                                <div class="flex items-center space-x-6">
                                    <button class="flex items-center text-gray-500 hover:text-indigo-600 transition-colors">
                                        <svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                        </svg>
                                        <span class="text-sm">12</span>
                                    </button>
                                    <button class="flex items-center text-gray-500 hover:text-indigo-600 transition-colors">
                                        <svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                                        </svg>
                                        <span class="text-sm">3</span>
                                    </button>
                                    <button class="text-gray-500 hover:text-indigo-600 transition-colors text-sm">Reply</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sample Post 2 -->
                    <div class="post-card bg-white p-6 rounded-xl shadow-lg">
                        <div class="flex items-start space-x-4">
                            <div class="bg-emerald-100 p-3 rounded-full">
                                <svg class="h-6 w-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="text-sm font-semibold text-gray-900">Anonymous User</span>
                                    <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium">Health</span>
                                    <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium">Neutral</span>
                                    <span class="text-sm text-gray-500">5 hours ago</span>
                                </div>
                                <p class="text-gray-700 mb-3">Today I finally went for a walk after weeks of staying indoors. It's amazing how something so simple can make such a difference in how I feel. Small wins matter.</p>
                                <div class="flex items-center space-x-6">
                                    <button class="flex items-center text-gray-500 hover:text-indigo-600 transition-colors">
                                        <svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                        </svg>
                                        <span class="text-sm">8</span>
                                    </button>
                                    <button class="flex items-center text-gray-500 hover:text-indigo-600 transition-colors">
                                        <svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                                        </svg>
                                        <span class="text-sm">1</span>
                                    </button>
                                    <button class="text-gray-500 hover:text-indigo-600 transition-colors text-sm">Reply</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sample Post 3 -->
                    <div class="post-card bg-white p-6 rounded-xl shadow-lg">
                        <div class="flex items-start space-x-4">
                            <div class="bg-purple-100 p-3 rounded-full">
                                <svg class="h-6 w-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="text-sm font-semibold text-gray-900">Anonymous User</span>
                                    <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium">Relationships</span>
                                    <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium">Sad</span>
                                    <span class="text-sm text-gray-500">1 day ago</span>
                                </div>
                                <p class="text-gray-700 mb-3">Feeling lonely lately. It's hard to reach out to people when you're struggling. Sometimes I wish I could just disappear for a while and come back when I'm better.</p>
                                <div class="flex items-center space-x-6">
                                    <button class="flex items-center text-gray-500 hover:text-indigo-600 transition-colors">
                                        <svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                        </svg>
                                        <span class="text-sm">15</span>
                                    </button>
                                    <button class="flex items-center text-gray-500 hover:text-indigo-600 transition-colors">
                                        <svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                                        </svg>
                                        <span class="text-sm">7</span>
                                    </button>
                                    <button class="text-gray-500 hover:text-indigo-600 transition-colors text-sm">Reply</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Load More -->
            <div class="text-center">
                <button class="bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-200 transition-colors">
                    Load More Posts
                </button>
            </div>
        </div>
    </div>

    <script>
        let selectedMood = null;
        let selectedCategory = null;

        function selectMood(mood) {
            selectedMood = mood;
            
            // Remove selected class from all mood options
            document.querySelectorAll('.mood-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            event.currentTarget.classList.add('selected');
        }

        function selectCategory(category) {
            selectedCategory = category;
            
            // Remove selected class from all category tags
            document.querySelectorAll('.category-tag').forEach(tag => {
                tag.classList.remove('selected');
            });
            
            // Add selected class to clicked tag
            event.currentTarget.classList.add('selected');
        }

        // Character counter
        document.getElementById('post-content').addEventListener('input', function() {
            const charCount = this.value.length;
            document.getElementById('char-count').textContent = charCount;
            
            if (charCount > 1000) {
                this.value = this.value.substring(0, 1000);
                document.getElementById('char-count').textContent = '1000';
            }
        });

        // Form submission
        document.getElementById('sharing-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const content = document.getElementById('post-content').value.trim();
            
            if (!content) {
                alert('Please share something before posting.');
                return;
            }
            
            if (!selectedMood) {
                alert('Please select how you\'re feeling.');
                return;
            }
            
            if (!selectedCategory) {
                alert('Please select a category for your post.');
                return;
            }
            
            // Here you would send the data to your backend
            const postData = {
                content: content,
                mood: selectedMood,
                category: selectedCategory,
                timestamp: new Date().toISOString(),
                anonymous: true
            };
            
            console.log('Post data:', postData);
            
            // Show success message
            alert('Your post has been shared anonymously! Thank you for sharing.');
            
            // Reset form
            this.reset();
            selectedMood = null;
            selectedCategory = null;
            document.querySelectorAll('.mood-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelectorAll('.category-tag').forEach(tag => {
                tag.classList.remove('selected');
            });
            document.getElementById('char-count').textContent = '0';
        });

        // Dark Mode Toggle
        const themeToggle = document.getElementById('theme-toggle');
        const sunIcon = document.getElementById('sun-icon');
        const moonIcon = document.getElementById('moon-icon');
        const body = document.body;
        
        const currentTheme = localStorage.getItem('theme') || 'light';
        
        if (currentTheme === 'dark') {
            body.classList.add('dark');
            sunIcon.classList.add('hidden');
            moonIcon.classList.remove('hidden');
        } else {
            body.classList.remove('dark');
            sunIcon.classList.remove('hidden');
            moonIcon.classList.add('hidden');
        }
        
        themeToggle.addEventListener('click', function() {
            if (body.classList.contains('dark')) {
                body.classList.remove('dark');
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.add('dark');
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
                localStorage.setItem('theme', 'dark');
            }
        });
    </script>
</body>
</html>
